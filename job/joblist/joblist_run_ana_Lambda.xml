<?xml version="1.0" encoding="utf-8"?>

<!--
  SUMS job for Lambda (V0) analysis with StLambdaMaker (run_ana_Lambda.C)
  - Run from project root: star-submit job/joblist/joblist_run_ana_Lambda.xml
  - Macro: analysis/run_ana_Lambda.C
  - Config: config/mainconf/main_lambda.yaml
  - Output: $SCRATCH/lambda_auau19/lambda_auau19_ana_Lambda_$JOBID.root
  - Log/err: analysis_lambda_auau19
  - Build lib/ (make) before submit.
-->

<job name="lambda_analysis_run_ana" simulateSubmission="false" maxFilesPerProcess="1" fileListSyntax="xrootd" copyInputLocally="true">

  <command>
    rm -f analysis/ana_Lambda_C.so analysis/ana_Lambda_C.d 2>/dev/null; pwd &amp;&amp; ls -la config &amp;&amp; starver SL24y &amp;&amp; mkdir -p $SCRATCH/lambda_auau19 &amp;&amp; setenv LD_LIBRARY_PATH ${PWD}/lib:${LD_LIBRARY_PATH} &amp;&amp; root4star -q -b analysis/run_ana_Lambda.C\(\"$FILELIST\",\"$SCRATCH/lambda_auau19/lambda_auau19_ana_Lambda_$JOBID.root\",\"$JOBID\",-1,\"config/mainconf/main_lambda.yaml\"\)
  </command>

  <stdout URL="file:/star/u/$USER/PATH/TO/star-analyzer/log/stdout.$JOBID.out" />
  <stderr URL="file:/star/u/$USER/PATH/TO/star-analyzer/err/stderr.$JOBID.err" />

  <input
      URL="catalog:star.bnl.gov?trgsetupname=production_19GeV_2019,production=P24iy,filetype=daq_reco_picoDst,filename~st_physics,storage!=HPSS"
      nFiles="40"
  />

  <SandBox>
    <Package>
      <File>file:./analysis/</File>
      <File>file:./lib/</File>
      <File>file:./config/</File>
      <File>file:./include/</File>
      <File>file:./StMaker/</File>
    </Package>
  </SandBox>

  <output fromScratch="lambda_auau19/lambda_auau19_ana_Lambda_$JOBID.root" toURL="file:/star/u/$USER/PATH/TO/star-analyzer/rootfile/lambda_auau19/" />

</job>
